# BL-004 — Implement GenUI descriptor contracts + base component renderer

- Type: **story**
- Milestone: `M2-W1`
- Repo alignment: **missing**
- Labels: `frontend`, `genui`, `wave:1`
- Depends on: `EPIC-W1`, `BL-002`

## Problem

Spec requires that LLM outputs can include structured UI component descriptors (GenUI) validated client-side to render charts/tables/callouts reliably. Repo currently has no GenUI layer.

## Proposed solution

Add a GenUI contract and renderer in the UI:
- Define zod schemas for supported component descriptors (v1: TextBlock, Table, Callout, Metric, ChartPlaceholder, CitationList).
- Implement a `GenUIRenderer` that maps descriptors → React components (shadcn primitives).
- Support streaming/incremental updates by applying descriptor patches or replacing components by id.

Keep descriptors simple; avoid overfitting to a single deliverable.

## Repo touchpoints

- `ui/src/components/genui/* (new)`
- `ui/src/components/report/* (new)`

## Spec / reference pointers

- reference/archive/plans/BACKLOG.md (BL-004)

## Acceptance criteria

- UI can render a GenUI payload containing at least 5 component types.
- Invalid descriptors fail gracefully (with a visible error state) and do not break the app.
- Renderer supports id-based replacement for streaming updates.

## Test plan

- Unit: zod schema validation for each component type.
- UI test: render sample descriptor payload and snapshot expected DOM output.
