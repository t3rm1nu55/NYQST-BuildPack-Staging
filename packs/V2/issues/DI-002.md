# DI-002 — DocuIntelli processing pipeline: DocIR extraction and normalized representations

- Type: **story**
- Milestone: `M7-DOCUINTELLI`
- Repo alignment: **missing**
- Labels: `domain:docuintelli`, `backend`
- Depends on: `DI-001`, `PLUG-003`

## Problem

Higher-order analysis needs consistent text/layout extraction (DocIR) for PDFs and docs; current RAG chunking is insufficient for clause-level analysis and diffing.

## Proposed solution

Implement DocIR pipeline:
- Extract: text, headings, tables, page coords, structural blocks.
- Normalize into a DocIR JSON format stored as artifacts.
- Index: store embeddings per block and allow clause-level retrieval.
- Provide UI viewer that can highlight referenced spans by locator.

## Acceptance criteria

- Uploading a PDF produces a DocIR artifact and block-level index entries.
- Citations can reference a DocIR locator and UI can highlight it.

## Test plan

- Integration: process fixture PDF → DocIR produced; locator highlight works.
