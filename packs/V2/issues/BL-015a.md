# BL-015a â€” DB migration: add messages.deliverable_type + backfill from conversation.deliverable_type

- Type: **task**
- Milestone: `M3-W2`
- Repo alignment: **missing**
- Labels: `backend`, `db`
- Depends on: `BL-015`

## Problem

Spec requires deliverable selection per message; schema currently does not support it.

## Proposed solution

- Add column `messages.deliverable_type` (nullable initially, then not null with default).
- Backfill from `conversations.deliverable_type` for existing messages.
- Keep conversation.deliverable_type as a default value (optional) to avoid breaking existing code paths.

## Repo touchpoints

- `migrations/versions/*`
- `src/intelli/db/models/conversations.py`

## Acceptance criteria

- Migration applies cleanly and preserves existing data.
- New messages must have deliverable_type set (validated).

## Test plan

- Migration test + model validation unit tests.
