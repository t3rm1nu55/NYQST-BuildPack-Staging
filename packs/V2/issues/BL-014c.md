# BL-014c â€” Retrieval tools merge context pack results with precedence rules

- Type: **task**
- Milestone: `M3-W2`
- Repo alignment: **missing**
- Labels: `backend`, `retrieval`
- Depends on: `BL-014b`

## Problem

Even with packs indexed, retrieval must respect scope precedence and avoid duplicate/low-quality results.

## Proposed solution

Update retrieval tool implementations to accept context_pack_ids and merge results (task > app > project > workspace), dedup by entity_id, and optionally rerank.

## Acceptance criteria

- Given overlapping packs, results are merged deterministically with precedence and dedup.

## Test plan

- Unit: merge and dedup logic; integration: retrieval constrained to packs.
