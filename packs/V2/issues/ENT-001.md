# ENT-001 â€” OIDC SSO login flow + workspace membership mapping

- Type: **story**
- Milestone: `M6-ENTERPRISE`
- Repo alignment: **missing**
- Labels: `backend`, `auth`, `sso`
- Depends on: `EPIC-ENTERPRISE`

## Problem

Current auth is local/API-key based. Enterprise users need SSO (OIDC) and mapping to tenant/workspace membership.

## Proposed solution

Implement OIDC:
- Add OIDC provider config (issuer, client_id, client_secret, redirect URIs).
- Implement login redirect + callback to exchange code for tokens.
- Create/update user records based on OIDC claims; map to tenant/workspace (email domain rules or explicit invites).
- Store refresh tokens securely if needed.

## Repo touchpoints

- `src/intelli/api/v1/auth.py`
- `src/intelli/services/auth/* (new)`

## Acceptance criteria

- User can log in via OIDC provider and receives a session/JWT in NYQST.
- User is assigned to the correct tenant/workspace on first login (configurable).

## Test plan

- Integration: mocked OIDC provider callback; user provisioning works.
